<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>my blog</title>
  <link rel="alternate" type="application/rss+xml"
   href="feed.rss" title="RSS feed for My Page">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
	h1 {
		text-align : center;
	}
	p {
		text-align : justify;
		min-width:200px;max-width:900px;margin:0 auto;padding:15px
	}	
	li {
		text-align : left;
		min-width:200px;max-width:900px;margin:0 auto;padding:15px
	}
	pre {
		text-align : left;
		min-width:200px;max-width:900px;margin:0 auto;padding:15px
	}
	div.sourceCode {
		text-align : left;
		min-width:200px;max-width:900px;margin:0 auto;padding:15px
	}
	#HME {
		text-decoration : none;
		float : left;
	}
	#LNK {
		text-decoration : none;
		float : right;
	}
	#NCE {
		text-decoration-line : underline;
		text-decoration-color : blue;
		color : blue;
	}
	a {
		text-decoration : none;
		color : inherit;
	}
  </style>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<a id = "LNK" 
	href = bloglight.html>üè†</a>
<a id = "LNK" 
	href = 2021-01-19_gen_dark.html>üåò</a>
<br/>
<header id="title-block-header">
<h1 class="title">my blog</h1>
<p class="author"><center>
<a href="mailto:kacpertopol@gmail.com">kacper topolnicki</a></br><a href="mailto:kacpertopol@gmail.com">kacpertopol@gmail.com</a>
<center></p>
</header>
<h1 id="infinite-matrices-in-mathematica-part-3">infinite matrices in <em>Mathematica</em>, part 3</h1>
<center>
<em>2021-01-19</em>
</center>
<p>mapping, addition, multiplication ‚Ä¶</p>
<p>The <a id = "NCE" href = https://kacpertopol.github.io/myblog/2021-01-16_gen_light.html> first post</a> in this series introduced the idea of implementing infinite matrices in the <em>Wolfram Language</em>. <a id = "NCE" href = https://kacpertopol.github.io/myblog/2021-01-17_gen_light.html>Next</a> we defined a type pattern to represent infinite matrices and implemented the transposition operation. This time we will write three more operations. The mapping function will allow us to map arbitrary functions over the elements of the matrix. Finally we will define the matrix - matrix addition and matrix - matrix multiplication functions.</p>
<p>First mapping. This is straightforward:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a>mapiM[<span class="dt">f_</span> (*<span class="dv">1</span>*)][<span class="fu">im</span> : <span class="fu">iM</span> (*<span class="dv">2</span>*)]  := </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a> <span class="fu">Module</span>[{nofRows , nofCols , rowFunction , colFunction},</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>  {nofRows , nofCols , rowFunction , colFunction} = <span class="fu">im</span> (*<span class="dv">3</span>*);</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a>  {</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>        nofCols , </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>        nofRows , </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a>        <span class="fu">Function</span>[<span class="fu">row</span>, </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a>            {#[[<span class="dv">1</span>]] , #[[<span class="dv">2</span>]] , <span class="fu">f</span>[#[[<span class="dv">3</span>]]]} &amp; /@ rowFunction[<span class="fu">row</span>]] (*<span class="dv">4</span>*),</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a>        <span class="fu">Function</span>[col, </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a>            {#[[<span class="dv">1</span>]] , #[[<span class="dv">2</span>]] , <span class="fu">f</span>[#[[<span class="dv">3</span>]]]} &amp; /@ colFunction[col]] (*<span class="dv">5</span>*) </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a>    }</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a>  ]</span></code></pre></div>
<p>There are two arguments. The first argument, marked 1 above, is the function that will be applied to each element of the matrix. The second argument, marked 2, is the matrix itself. In 3 the matrix components are unpacked to local variables. The mapping operation is performed inside each non zero component of the matrix in 4 and 5 - <code>#[[3]]</code> is the value of the matrix element and in <code>f[#[[3]]]</code> the user supplied function is applied to this element.</p>
<p>To see how this works in action we can evaluate:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a>matrixFormiM[{<span class="dv">1</span> , <span class="dv">5</span>} , {<span class="dv">1</span> , <span class="dv">5</span>}][mapiM[<span class="fu">Function</span>[el , -el]][tMat]]</span></code></pre></div>
<p>where <code>tMat</code> is the <span class="math inline">\(P\)</span> matrix from <a id = "NCE" href = https://kacpertopol.github.io/myblog/2021-01-16_gen_light.html>part 1</a> and was defined in <em>Mathematica</em> in <a id = "NCE" href = https://kacpertopol.github.io/myblog/2021-01-17_gen_light.html>part 2</a>. The result: <span class="math display">\[
\left(
\begin{array}{cccccccc}
 p-1 &amp; -p &amp; 0 &amp; 0 &amp; 0 &amp; \cdot  &amp; \cdot  &amp; \cdot  \\
 0 &amp; p-1 &amp; -p &amp; 0 &amp; 0 &amp; \cdot  &amp; \cdot  &amp; \cdot  \\
 0 &amp; 0 &amp; p-1 &amp; -p &amp; 0 &amp; \cdot  &amp; \cdot  &amp; \cdot  \\
 0 &amp; 0 &amp; 0 &amp; p-1 &amp; -p &amp; \cdot  &amp; \cdot  &amp; \cdot  \\
 0 &amp; 0 &amp; 0 &amp; 0 &amp; p-1 &amp; \cdot  &amp; \cdot  &amp; \cdot  \\
 \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  \\
 \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  \\
 \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  \\
\end{array}
\right)
\]</span></p>
<p>We have two more operations to go. First matrix - matrix addition. We will begin by defining a helper function <code>addsame</code>. It will take as argument a list containing all non zero elements in both of the matrices we want to add - for a given row (or column):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a>addsame[{<span class="dt">a___</span> , {<span class="dt">r_</span> , <span class="dt">c_</span> , <span class="dt">v1_</span>} , <span class="dt">b___</span> , {<span class="dt">r_</span> , <span class="dt">c_</span> , <span class="dt">v2_</span>} , <span class="dt">d___</span>}] := </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a> addsame[{<span class="fu">a</span> , <span class="fu">b</span> , <span class="fu">d</span> , {<span class="fu">r</span> , <span class="fu">c</span> , v1 + v2}}]; (*<span class="dv">1</span>*)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a>addsame[<span class="dt">l_</span>] := <span class="fu">l</span>; (*<span class="dv">2</span>*)</span></code></pre></div>
<p>The definition uses recursion and is divided into two parts. The function pattern marked 1 above is more specific and acts only when two matrix elements have the same row and column number. If this is the case then the values of the matrix elements are added <code>v1 + v2</code>. The second definition, marked 2, is more general and will act only when no two elements have the same row and column numbers.</p>
<p>This helper function is part of the implementation of <code>addiM</code> - a function adding two infinite matrices togather:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a>addiM[im1 : <span class="fu">iM</span> , im2 : <span class="fu">iM</span>] (*<span class="dv">1</span>*):=</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a>  <span class="fu">Module</span>[</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a>   {nofRows1 , nofCols1 , rowFunction1 , colFunction1,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a>    nofRows2 , nofCols2 , rowFunction2 , colFunction2 , newFunRow , </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>    newFunCol},</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a>   {nofRows1 , nofCols1 , rowFunction1 , colFunction1} = im1;</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a>   {nofRows2 , nofCols2 , rowFunction2 , colFunction2} = im2;</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a>   <span class="fu">If</span>[nofRows1 != nofRows2 , </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true"></a>    <span class="fu">Throw</span>[&quot;The <span class="fu">number</span> of rows does <span class="fu">not</span> match <span class="fu">in</span> addiM&quot;]]; (*<span class="dv">2</span>*)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true"></a>   <span class="fu">If</span>[nofCols1 != nofCols2 , </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true"></a>    <span class="fu">Throw</span>[&quot;The <span class="fu">number</span> of columns does <span class="fu">not</span> match <span class="fu">in</span> addiM&quot;]]; (*<span class="dv">3</span>*)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true"></a>   newFunRow = <span class="fu">Function</span>[<span class="fu">row</span> , </span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true"></a>     addsame[<span class="fu">Join</span>[rowFunction1[<span class="fu">row</span>] , rowFunction2[<span class="fu">row</span>]]]</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true"></a>     ]; (*<span class="dv">4</span>*)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true"></a>   newFunCol = <span class="fu">Function</span>[<span class="fu">column</span> , </span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true"></a>     addsame[<span class="fu">Join</span>[colFunction1[<span class="fu">column</span>] , colFunction2[<span class="fu">column</span>]]]</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true"></a>     ]; (*<span class="dv">5</span>*)</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true"></a>   newiM[nofRows1 , nofCols2, newFunRow, newFunCol]</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true"></a>   ];</span></code></pre></div>
<p>The arguments, marked 1 above, are two infinite matrices. Next the elements of the matrices are unpacked into local variables and in 2 and 3 the sizes of the matrices are checked. Failure at this point will result in an exception being thrown. In 4 and 5 above - new row and column functions are created. <code>addsame</code> is being used in conjunction with <code>Join</code> to concatenate the non zero elements in a given row (marked 4) or column (marked 5) of infinite matrices <code>im1</code> and <code>im2</code>. To see all of this in action try evaluating:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a>matrixFormiM[{<span class="dv">1</span> , <span class="dv">5</span>} , {<span class="dv">1</span> , <span class="dv">5</span>}][</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a> addiM[mapiM[<span class="fu">Function</span>[el , -el]][tMat] , tMat]]</span></code></pre></div>
<p>We can expect a null matrix ‚Ä¶ and we get: <span class="math display">\[
\left(
\begin{array}{cccccccc}
 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; \cdot  &amp; \cdot  &amp; \cdot  \\
 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; \cdot  &amp; \cdot  &amp; \cdot  \\
 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; \cdot  &amp; \cdot  &amp; \cdot  \\
 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; \cdot  &amp; \cdot  &amp; \cdot  \\
 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; \cdot  &amp; \cdot  &amp; \cdot  \\
 \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  \\
 \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  \\
 \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  &amp; \cdot  \\
\end{array}
\right)
\]</span> ‚Ä¶ a null matrix.</p>
<br/>
<a id = "LNK" 
   href = "feed.rss"><img src = "Feed-icon.svg" height = 14em></a>
</body>
</html>
